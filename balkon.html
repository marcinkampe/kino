<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Balkon</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Wybierz miejsce na balkonie</h1>
    <form onchange="document.forms.miejsca.submit()">
        <select name="jakie" selected="balkon">
            <option name="balkon" value="balkon">Balkon</option>
            <option name="parter" value="parter">Parter</option>
        </select>
    </form>
    <form action="parter.html" name="miejsca" method="get" id="miejsca_b" onclick="zaznaczone()">
        
    </form>
    <div id="wynik"></div>
    <form action="koszyk.html" method="get" id="koszyk">
        <button onclick="pobierz_dane()">Przejd≈∫ do koszyka</button>
    </form>
</body>
<script>

    let film= new URL(location.href).searchParams.get('seans')
    console.log(film)

    let miejsca_b=document.getElementById("miejsca_b")
    let wynik=document.getElementById("wynik")

    let check_b =[]

    for (let i = 0; i < 5; i++) {
            check_b[i]= new URL(location.href).searchParams.get(i+'_b');
            console.log('miejsce:'+i+' '+check_b[i]);
            if (check_b[i]=='on') {
                miejsca_b.innerHTML+="<input type='checkbox' name='"+i+"_b' checked>"
            } else {
                miejsca_b.innerHTML+="<input type='checkbox' name='"+i+"_b'>"
            } 
            
    }
    function zaznaczone() {
        wynik.innerHTML=" "
        for (let i = 0; i < 5; i++) {
            if (document.forms.miejsca[i+'_b'].checked) {
                wynik.innerHTML+=i+" "
            }
        }
    }

    let check_p =[]

    for (let i = 0; i < 3; i++) {
            check_p[i]= new URL(location.href).searchParams.get(i+'_p');
            console.log('miejsce parter:'+i+' '+check_p[i]);
            if (check_p[i]!=null) {
                miejsca_b.innerHTML+="<input type='hidden' name='"+i+"_p' value='on'>"
            } else {
                miejsca_b.innerHTML+="<input type='hidden' name='"+i+"_p' value='off'>"
            } 
    }

    function pobierz_dane() {
        let koszyk=document.getElementById("koszyk");

        for (let i = 0; i < 3; i++) {
            let miejsce = document.forms.miejsca_b[i+'_p'].value
            if (miejsce=='on') {
                koszyk.innerHTML+="<input type='hidden' name='"+i+"_p' value='on'>"
            } else {
                koszyk.innerHTML+="<input type='hidden' name='"+i+"_p' value='off'>"
            } 
        }

        for (let i = 0; i < 5; i++) {
            let miejsce = document.forms.miejsca_b[i+'_b']
            if (miejsce.checked) {
                koszyk.innerHTML+="<input type='hidden' name='"+i+"_b' value='on'>"
            } else {
                koszyk.innerHTML+="<input type='hidden' name='"+i+"_b' value='off'>"
            } 
        }

        document.forms.koszyk.submit()
    }
    
</script>
</html>